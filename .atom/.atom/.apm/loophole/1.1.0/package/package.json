{"name":"loophole","version":"1.1.0","description":"A hack to enable use of libraries that depend on a basic form of eval in Atom","main":"./lib/loophole.js","scripts":{"prepublish":"grunt clean lint coffee","test":"grunt test"},"repository":{"type":"git","url":"git+https://github.com/atom/loophole.git"},"bugs":{"url":"https://github.com/atom/loophole/issues"},"license":"MIT","devDependencies":{"coffee-script":"~1.7.0","jasmine-focused":"1.x","grunt-contrib-coffee":"~0.9.0","grunt-cli":"~0.1.8","grunt":"~0.4.1","grunt-shell":"~0.2.2","grunt-coffeelint":"0.0.6","rimraf":"~2.2.2","temp":"~0.6.0"},"readme":"# Eval Loophole [![Build Status](https://travis-ci.org/atom/loophole.svg?branch=master)](https://travis-ci.org/atom/loophole)\n\nThis is a hack to enable third-party libraries that depend on a limited subset\nof `eval` semantics to work in Atom with a content security policy that forbids\ncalls to `eval`.\n\n```coffee\n{allowUnsafeEval, allowUnsafeNewFunction} = require 'loophole'\n\nallowUnsafeEval ->\n  crazyLibrary.exploitLoophole() # allows `eval(...)`\n\nallowUnsafeNewFunction ->\n  crazyLibrary.exploitLoophole() # allows `new Function(...)`\n```\n\nYou can also use the exported `Function` constructor directly:\n\n```coffee\n{Function} = require 'loophole'\nf = new Function(\"return 1 + 1;\")\n```\n\n## How?\n\n`allowUnsafeEval` replaces `eval` with a call to `vm.runInThisContext`, which\nwon't perfectly emulate `eval` but is good enough in certain circumstances, like\ncompiling [PEG.js][peg-js] grammars.\n\n`allowUnsafeNewFunction` temporarily replaces `global.Function` with\n`loophole.Function`, which passes the source of the desired function to\n`vm.runInThisContext`.\n\n## Why?\n\nIf there's a loophole, why even enable CSP? It still prevents developers from\naccidentally invoking eval with legacy libraries. For example, did you know that\njQuery runs eval when you pass it content with script tags? If you want eval,\nyou'll need to explicitly ask for it.\n\n[peg-js]: http://pegjs.majda.cz/\n","readmeFilename":"README.md","homepage":"https://github.com/atom/loophole#readme","_id":"loophole@1.1.0","_shasum":"37949fea453b6256acc725c320ce0c5a7f70a2bd","_resolved":"https://registry.npmjs.org/loophole/-/loophole-1.1.0.tgz","_from":"loophole@>=1.1.0 <2.0.0"}